<!-- index.html -->
<html>
<head>
  <title>AI Remover Pro</title>
  <style>
    canvas { border: 2px solid black; }
    #upload-btn { margin: 10px; }
  </style>
</head>
<body>
  <h2>Upload Your Video</h2>
  <input type="file" id="video-upload" accept="video/*">
  <button id="upload-btn">Upload</button><br><br>
  <canvas id="video-canvas"></canvas>

  <script>
    let canvas = document.getElementById('video-canvas');
    let ctx = canvas.getContext('2d');
    let rect = {}, drag = false;
    let videoFrame;

    document.getElementById('video-upload').onchange = function (e) {
      let file = e.target.files[0];
      let video = document.createElement('video');
      video.src = URL.createObjectURL(file);
      video.onloadeddata = function () {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        video.currentTime = 0.1;
      };
      video.ontimeupdate = function () {
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        video.pause();
      };
    };

    canvas.onmousedown = function (e) {
      rect.startX = e.offsetX;
      rect.startY = e.offsetY;
      drag = true;
    };
    canvas.onmouseup = function (e) {
      drag = false;
      console.log(rect); // Preview coordinates
    };
    canvas.onmousemove = function (e) {
      if (drag) {
        rect.w = e.offsetX - rect.startX;
        rect.h = e.offsetY - rect.startY;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(videoFrame, 0, 0);
        ctx.strokeRect(rect.startX, rect.startY, rect.w, rect.h);
      }
    };
  </script>
</body>
</html>
